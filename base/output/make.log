
 make.py started: 2019-08-26 18:53:50 C:\Users\dgentil1\Desktop\aborto_uru_repo\Aborto-Uruguay\base\code 




Execute:  "C:\Program Files (x86)\Stata14\StataSE-64.exe" /e do "./clean_raw.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   14.2   Copyright 1985-2015 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     Special Edition                  College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

110-user Stata network perpetual license:
       Serial number:  401406206058
         Licensed to:  CIS Department
                       Brown University

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./clean_raw.do 

. clear all

. set more off

. 
. program main_clean_raw
  1.     clean_01_05 
  2.     clean_06
  3.     clean_07
  4.     clean_08
  5.     clean_09_16
  6. end

. 
. program clean_01_05
  1.     * Note: there is no nomdepto for 2005: check running table nomdpto ani
> o
.     * Can't find: meses_trabajando anios_trabajando
.     
.     foreach year in 2001 2002 2003 2004 2005 {
  2.         foreach t in p h {
  3.             import excel using "..\..\raw/`year'/`t'`year'.xls", clear fir
> st
  4.             save ..\temp\preclean_`year'_`t'.dta, replace
  5.         }
  6.         use ..\temp\preclean_`year'_p.dta, clear
  7. 
.         merge m:1 correlativ using ..\temp\preclean_`year'_h.dta, nogen
  8.         save ..\temp\preclean_`year'.dta, replace
  9.     }
 10.     foreach year in 2001 2002 2003 2004 2005 {
 11.         use ..\temp\preclean_`year'.dta, clear
 12.         
.         rename (correlativ nper  locech          nomlocech ///
>                 e1         e2    pt1             ht11 ///
>                 f17_1            f17_2           f1_1      f23 ///
>                 d14              d16             ht3) ///               
>                (numero     pers  loc             nomloc ///
>                 hombre     edad  ytotal          y_hogar ///
>                 horas_trabajo_p  horas_trabajo_s trabajo_1 busca_trabajo ///
>                 nbr_above14      nbr_people      nbr_under14)
 13. 
.         gen    c98_resid_house        =    (c1==1)
 14.         gen    c98_resid_owned        =    (d2==1|d2==2)
 15.         gen    c98_nbr_rooms        =    d3
 16.         gen    c98_nbr_bedrooms    =    d4
 17.         gen    c98_b_piped_water    =    (d6==1)
 18.         gen    c98_hhld_toilet        =    (d7==1)
 19.         gen    c98_b_sewage        =    (d8==1)
 20.         gen    c98_hhld_stove        =    (d9!=5)
 21.         gen    c98_hhld_hot_water    =    (d10_1==1|d10_2==1)
 22.         gen    c98_hhld_refrigerat    =    (d10_3==1)
 23.         gen    c98_hhld_tv            =    (d10_4==1)
 24.         gen    c98_hhld_vcr        =    (d10_6==1)
 25.         gen    c98_hhld_wash_mac    =    (d10_7==1)
 26.         gen    c98_hhld_dishwasher    =    (d10_8==1)
 27.         gen    c98_hhld_microwave    =    (d10_9==1)
 28.         gen    c98_hhld_car        =    (d10_12==1)
 29.         gen    c01_hhld_computer    =    (d10_10==1)
 30.         gen    c01_hhld_internet    =    (d10_11==1)
 31.         gen    c01_hhld_phone        =    (d10_13==1)
 32.         gen    c01_hhld_cable_tv    =    (d10_5==1)
 33.         
.         if `year' == 2001 | `year' == 2002 | `year' == 2003 {
 34.             * no insurance
.             gen health_insurance = 0
 35.             
.             * public
.             replace health_insurance = 1 if e8_1 == 1
 36.             * military or police
.             replace health_insurance = 2 if e8_2 == 1
 37.             * municipal
.             replace health_insurance = 3 if e8_3 == 1
 38.             * IAMC
.             replace health_insurance = 4 if e5 == 1
 39.             * other
.             replace health_insurance = 5 if e8_4_1 == 1
 40.         }
 41.         else {
 42.             * no insurance
.             gen health_insurance = 0
 43.             
.             * public
.             replace health_insurance = 1 if e5_1 == 1
 44.             * military or police
.             replace health_insurance = 2 if e5_2 == 1
 45.             * municipal
.             replace health_insurance = 3 if e5_3 == 1
 46.             * IAMC
.             replace health_insurance = 4 if e5_5 == 1
 47.             * other
.             replace health_insurance = 5 if (e5_4 == 1 | e5_6_1 == 1)
 48.         }
 49. 
.         gen public_health = (health_insurance == 1)
 50. 
.         gen blanco = .
 51. 
.         capture gen     trimestre = 1 if inlist(mes, 1, 2, 3)
 52.         capture replace trimestre = 2 if inlist(mes, 4, 5, 6)
 53.         capture replace trimestre = 3 if inlist(mes, 7, 8, 9)
 54.         capture replace trimestre = 4 if inlist(mes, 10, 11, 12)
 55.         
.         gen married = (e4==1|e4==2)
 56. 
.         gen estudiante = (pobpcoac==7)
 57.         gen trabajo    = (pobpcoac==2)
 58.         bysort numero: egen y_hogar_alt = sum(ytotal) 
 59.         gen horas_trabajo =  horas_trabajo_p + horas_trabajo_s
 60.         gen meses_trabajando = .
 61.         gen anios_trabajando = .
 62.         
.         keep numero pers anio trimestre mes dpto secc segm estrato loc nomloc
>  ccz ///
>              peso* hombre edad ytotal y_hogar* nbr_people nbr_above14 nbr_und
> er14 ///
>              pobpcoac married c98_* c01_* estudiante anios_* *trabaj* blanco 
> ///
>              health_insurance public_health
 63.         
.         save ..\temp\clean_`year'.dta, replace
 64.     }
 65.     * Estudiante: {1=si,2=no} --> but estudiante=0 en 3.5%, would it be no
>  response?
. end

. 
. program clean_06
  1.         use ../temp/raw_2006.dta, clear
  2.         
.         capture rename Dpto dpto
  3.         capture rename Trimestre trimestre
  4.         capture rename Estrato estrato
  5.         capture rename PT1 pt1
  6.         capture rename HT11 ht11
  7.         capture rename HT3 ht3
  8.         capture rename Pobpcoac pobpcoac
  9. 
.         rename (nper  locagr nom_locagr e27  e26    pesoano  pt1             
>  ht11             ///
>                 f62          f81             f93             f82_1           
>  f82_2            ///
>                 d23          d25             ht3             f102            
>                   ///
>                 e38          e39_1           e30_1  e30_2    e30_3  e30_4    
>  e30_5_2)        ///
>                (pers   loc   nomloc     edad hombre pesoan   ytotal     y_hog
> ar                ///
>                 trabajo_1    horas_trabajo_p horas_trabajo_s meses_trabajando
>  anios_trabajando ///
>                 nbr_above14  nbr_people      nbr_under14     busca_trabajo   
>                   ///
>                 live_births  live_births_nbr afro   asia     blanco indigena 
>  otro)
 10. 
.         gen    c98_resid_house        =    (c1!=5)
 11.         gen    c06_mat_walls        =    (c2==1|c2==2)
 12.         gen    c06_mat_roof        =    (c3==1|c3==2)
 13.         gen    c06_mat_floor        =    (c4==1|c4==2)
 14.         gen    c98_resid_owned        =    (d7_1==1|d7_1==2|d7_1==3|d7_1==
> 4)
 15.         gen    c98_nbr_rooms        =    d8
 16.         gen    c98_nbr_bedrooms    =    d9
 17.         gen    c98_b_piped_water    =    (d13==1)
 18.         gen    c98_hhld_toilet        =    (d14==1)
 19.         gen    c98_b_sewage        =    (d17==1)
 20.         gen    c06_b_electr        =    (d18_1==1|d18_1==2)
 21.         gen    c98_hhld_stove        =    (d19!=3)
 22.         gen    c98_hhld_hot_water    =    (d21_1_1==1|d21_1_2==1|d21_1_3==
> 1|d21_2_1==1|d21_2_2==1)
 23.         gen    c98_hhld_refrigerat    =    (d21_3==1|d21_4==1)
 24.         gen    c98_hhld_tv            =    (d21_5_1==1)
 25.         gen    c98_hhld_vcr        =    (d21_8==1|d21_9==1)
 26.         gen    c98_hhld_wash_mac    =    (d21_10==1)
 27.         gen    c98_hhld_dishwasher    =    (d21_12==1)
 28.         gen    c98_hhld_microwave    =    (d21_13==1)
 29.         gen    c98_hhld_car        =    (d21_18_1==1)
 30.         gen    c01_hhld_computer    =    (d21_14_1==1)
 31.         gen    c01_hhld_internet    =    (d21_15==1)
 32.         gen    c01_hhld_phone        =    (d21_16_1==1|d21_17_1==1)
 33.         gen    c01_hhld_cable_tv    =    (d21_7==1)
 34. 
.         * no insurance
.         gen health_insurance = 0    
 35.         * public
.         replace health_insurance = 1 if (e42_1 == 1 |  e42_2 == 1)
 36.         * military or police
.         replace health_insurance = 2 if (e42_3 == 1 | e42_4 == 1)
 37.         * municipal
.         replace health_insurance = 3 if e42_5 == 1
 38.         * IAMC
.         replace health_insurance = 4 if e42_7 == 1
 39.         * other
.         replace health_insurance = 5 if (e42_6 == 1 | e42_8 == 1 | ///
>             e42_9 == 1 | e42_10 == 1 | e42_11_1 == 1)
 40. 
.         gen public_health = (health_insurance == 1)
 41.         
.         gen married  = (e34==1|e37==2) if e34!=0
 42. 
.         replace blanco = 0 if blanco != 1
 43.         
.         gen estudiante = (pobpcoac == 7)
 44.         gen trabajo    = (pobpcoac == 2)
 45.         bysort numero: egen y_hogar_alt = sum(ytotal) 
 46.         gen horas_trabajo =  horas_trabajo_p + horas_trabajo_s
 47. 
.         destring anio, replace
 48.         destring secc, replace
 49.         destring segm, replace
 50.         destring estrato, replace
 51. 
.         keep numero pers anio trimestre mes dpto secc segm estrato loc nomloc
>  ccz    ///
>              peso* hombre edad ytotal y_hogar* nbr_people nbr_above14 nbr_und
> er14    ///
>              pobpcoac married c98_* c01_* c06_* estudiante anios_* *trabaj* /
> //
>              lp_06 li_06 region_3 region_4 live_births* blanco ///
>              health_insurance public_health
 52. 
.         save ..\temp\clean_2006, replace    
 53. end

. 
. program clean_07
  1.         use ../temp/raw_2007.dta, clear
  2.         
.         capture rename Dpto dpto
  3.         capture rename Trimestre trimestre
  4.         capture rename Estrato estrato
  5.         capture rename PT1  pt1
  6.         capture rename HT11 ht11
  7.         capture rename HT3  ht3
  8.         capture rename Pobpcoac pobpcoac
  9.                     
.         rename (nper loc_agr pesoano e27      e28   pt1       ht11           
>                    ///
>                 f68          f88              f101            f89_1          
>   f89_2            ///
>                 d24          d26              ht3             f102           
>                    ///
>                 e41          e42_1            e31_1 e31_2     e31_3   e31_4  
>   e31_5_1)         ///
>                (pers loc     pesoan  hombre   edad  ytotal    y_hogar        
>                    ///
>                 trabajo_1    horas_trabajo_p  horas_trabajo_s meses_trabajand
> o anios_trabajando ///
>                 nbr_above14  nbr_people       nbr_under14     busca_trabajo  
>                    ///
>                 live_births  live_births_nbr  afro  asia      blanco  indigen
> a otro)
 10. 
.         gen    c98_resid_house        =    (c1!=5)
 11.         gen    c06_mat_walls        =    (c2==1|c2==2)
 12.         gen    c06_mat_roof        =    (c3==1|c3==2)
 13.         gen    c06_mat_floor        =    (c4==1|c4==2)
 14.         gen    c98_resid_owned        =    (d8_1==1|d8_1==2|d8_1==3|d8_1==
> 4)
 15.         gen    c98_nbr_rooms        =    d9
 16.         gen    c98_nbr_bedrooms    =    d10
 17.         gen    c98_b_piped_water    =    (d14_1==1)
 18.         gen    c98_hhld_toilet        =    (d15==1)
 19.         gen    c98_b_sewage        =    (d18_1==1)
 20.         gen    c06_b_electr        =    (d19_1==1|d19_1==2)
 21.         gen    c98_hhld_stove        =    (d20!=3)
 22.         gen    c98_hhld_hot_water    =    (d22_1_1==1|d22_1_2==1|d22_1_3==
> 1|d22_2_1==1|d22_2_2==1)
 23.         gen    c98_hhld_refrigerat    =    (d22_1_2==1|d22_4==1)
 24.         gen    c98_hhld_tv            =    (d22_5_1==1)
 25.         gen    c98_hhld_vcr        =    (d22_8==1|d22_9==1)
 26.         gen    c98_hhld_wash_mac    =    (d22_10==1)
 27.         gen    c98_hhld_dishwasher    =    (d22_12==1)
 28.         gen    c98_hhld_microwave    =    (d22_13==1)
 29.         gen    c98_hhld_car        =    (d22_18_1==1)
 30.         gen    c01_hhld_computer    =    (d22_14_1==1)
 31.         gen    c01_hhld_internet    =    (d22_15_1==1|d22_15_2==1)
 32.         gen    c01_hhld_phone        =    (d22_16_1==1|d22_17_1==1)
 33.         gen    c01_hhld_cable_tv    =    (d22_7==1)
 34. 
.         * no insurance
.         gen health_insurance = 0    
 35.         * public
.         replace health_insurance = 1 if (e43_1 == 1 |  e43_2 == 1)
 36.         * military or police
.         replace health_insurance = 2 if (e43_3 == 1 | e43_4 == 1)
 37.         * municipal
.         replace health_insurance = 3 if e43_5 == 1
 38.         * IAMC
.         replace health_insurance = 4 if e43_7 == 1
 39.         * other
.         replace health_insurance = 5 if (e43_6 == 1 | e43_8 == 1 | ///
>             e43_9 == 1 | e43_10 == 1 | e43_11_1 == 1)
 40. 
.         gen public_health = (health_insurance == 1)
 41.         
.         gen married  = (e37==1|e40==2) if e37!=0
 42.         
.         replace blanco = 0 if blanco != 1
 43.         
.         gen estudiante = (pobpcoac == 7)
 44.         gen trabajo    = (pobpcoac == 2)
 45.         bysort numero: egen y_hogar_alt = sum(ytotal) 
 46.         gen horas_trabajo =  horas_trabajo_p + horas_trabajo_s
 47. 
.         destring numero, replace
 48.         destring anio, replace
 49.         destring secc, replace
 50.         destring segm, replace
 51.         destring estrato, replace
 52.         
.         gen nomloc = ""
 53. 
.         keep numero pers anio trimestre mes dpto secc segm estrato loc nomloc
>  ccz    ///
>              peso* hombre edad ytotal y_hogar* nbr_people nbr_above14 nbr_und
> er14    ///
>              pobpcoac married c98_* c01_* c06_* estudiante anios_* *trabaj* /
> //
>              lp_06 li_06 region_3 region_4 live_births* blanco ///
>              health_insurance public_health
 54. 
.         save ..\temp\clean_2007, replace
 55. end 

. 
. program clean_08
  1.         use ../temp/raw_2008.dta, clear
  2.         
.         capture rename Dpto dpto
  3.         capture rename Trimestre trimestre
  4.         capture rename Estrato estrato
  5.         capture rename PT1  pt1
  6.         capture rename HT11 ht11
  7.         capture rename HT3  ht3
  8.             
.         rename (nper e28     nom_locagr      pesoano e27     pt1    ht11     
>                   ///
>                 f68          f88_1           f101            f89_1           
>  f89_2            ///
>                 d24          d26             ht3     f102                    
>                   ///
>                 e41          e42_1           e31_1   e31_2   e31_3  e31_4    
> e31_5_1)          ///
>                (pers edad    nomloc          pesoan  hombre  ytotal  y_hogar 
>                   ///
>                 trabajo_1    horas_trabajo_p horas_trabajo_s meses_trabajando
>  anios_trabajando ///
>                 nbr_above14  nbr_people      nbr_under14     busca_trabajo   
>                   ///
>                 live_births  live_births_nbr afro    asia    blanco indigena 
> otro )
  9. 
.         gen    c98_resid_house        =    (c1!=5)
 10.         gen    c06_mat_walls        =    (c2==1|c2==2)
 11.         gen    c06_mat_roof        =    (c3==1|c3==2)
 12.         gen    c06_mat_floor        =    (c4==1|c4==2)
 13.         gen    c98_resid_owned        =    (d8_1==1|d8_1==2|d8_1==3|d8_1==
> 4)
 14.         gen    c98_nbr_rooms        =    d9
 15.         gen    c98_nbr_bedrooms    =    d10
 16.         gen    c98_b_piped_water    =    (d14_1==1)
 17.         gen    c98_hhld_toilet        =    (d15==1)
 18.         gen    c98_b_sewage        =    (d18_1==1)
 19.         gen    c06_b_electr        =    (d19_1==1|d19_1==2)
 20.         gen    c98_hhld_stove        =    (d20!=3)
 21.         gen    c98_hhld_hot_water    =    (d22_1_1==1|d22_1_2==1|d22_1_3==
> 1|d22_2_1==1|d22_2_2==1)
 22.         gen    c98_hhld_refrigerat    =    (d22_1_2==1|d22_4==1)
 23.         gen    c98_hhld_tv            =    (d22_5_1==1)
 24.         gen    c98_hhld_vcr        =    (d22_8==1|d22_9==1)
 25.         gen    c98_hhld_wash_mac    =    (d22_10==1)
 26.         gen    c98_hhld_dishwasher    =    (d22_12==1)
 27.         gen    c98_hhld_microwave    =    (d22_13==1)
 28.         gen    c98_hhld_car        =    (d22_18_1==1)
 29.         gen    c01_hhld_computer    =    (d22_14_1==1)
 30.         gen    c01_hhld_internet    =    (d22_15_1==1|d22_15_2==1)
 31.         gen    c01_hhld_phone        =    (d22_16_1==1|d22_17_1==1)
 32.         gen    c01_hhld_cable_tv    =    (d22_7==1)
 33.         
.         * no insurance
.         gen health_insurance = 0    
 34.         * public
.         replace health_insurance = 1 if (e43_1 == 1 |  e43_2 == 1)
 35.         * military or police
.         replace health_insurance = 2 if (e43_3 == 1 | e43_4 == 1)
 36.         * municipal
.         replace health_insurance = 3 if e43_5 == 1
 37.         * IAMC
.         replace health_insurance = 4 if e43_7 == 1
 38.         * other
.         replace health_insurance = 5 if (e43_6 == 1 | e43_8 == 1 | ///
>             e43_9 == 1 | e43_10 == 1 | e43_11_1 == 1)
 39.         
.         gen public_health = (health_insurance == 1)
 40. 
.         gen married  = (e37==1|e40==2) if e37!=0
 41.         replace blanco = 0 if blanco != 1
 42.         
.         gen estudiante = (pobpcoac == 7)
 43.         gen trabajo    = (pobpcoac == 2)
 44.         bysort numero: egen y_hogar_alt = sum(ytotal) 
 45.         gen horas_trabajo =  horas_trabajo_p + horas_trabajo_s
 46.         
.         destring numero, replace
 47.         destring anio, replace
 48.         destring secc, replace
 49.         destring segm, replace
 50.         destring estrato, replace
 51.         
.         gen loc = ""    
 52. 
.         keep numero pers anio trimestre mes dpto  secc segm estrato loc nomlo
> c ccz  ///
>              peso* hombre edad ytotal y_hogar* nbr_people nbr_above14 nbr_und
> er14    ///
>              pobpcoac married c98_* c01_* c06_* estudiante anios_* *trabaj* /
> //
>              lp_06 li_06 region_3 region_4 live_births* blanco ///
>              health_insurance public_health
 53. 
.         save ..\temp\clean_2008, replace
 54. end 

. 
. program clean_09_16
  1. 
.     forval year=2009/2016{
  2.         use ../temp/raw_`year'.dta, clear
  3.         
.         capture rename estratogeo09 estrato
  4.         capture rename estratogeo estrato
  5.         capture rename estred13 estrato
  6.         capture rename PT1 pt1
  7.         capture rename HT11 ht11    
  8.         capture rename HT3 ht3
  9.         capture rename Loc_agr_13 locagr
 10.         capture rename Nom_loc_agr_13 nom_locagr
 11.         capture rename POBPCOAC pobpcoac
 12.             
.         rename (nper e27    e26      locagr nom_locagr      pesoano pt1      
> ht11             ///
>                 f66         f85             f98             f88_1            
> f88_2            ///
>                 d23         d25             ht3             f99              
> e29_6)           ///
>                (pers edad   hombre   loc    nomloc          pesoan  ytotal   
> y_hogar          ///
>                 trabajo_1   horas_trabajo_p horas_trabajo_s meses_trabajando 
> anios_trabajando ///
>                 nbr_above14 nbr_people      nbr_under14     busca_trabajo    
> ascendencia)
 13.         
.         gen    c98_resid_house        =    (c1!=5)
 14.         gen    c06_mat_walls        =    (c2==1|c2==2)
 15.         gen    c06_mat_roof        =    (c3==1|c3==2)
 16.         gen    c06_mat_floor        =    (c4==1|c4==2)
 17.         gen    c98_resid_owned        =    (d8_1==1|d8_1==2|d8_1==3|d8_1==
> 4)
 18.         gen    c98_nbr_rooms        =    d9
 19.         gen    c98_nbr_bedrooms    =    d10
 20.         gen    c98_b_piped_water    =    (d12==1)
 21.         gen    c98_hhld_toilet        =    (d13==1)
 22.         gen    c98_b_sewage        =    (d16==1)
 23.         gen    c06_b_electr        =    (d18==1)
 24.         gen    c98_hhld_stove        =    (d19!=3)
 25.         gen    c98_hhld_hot_water    =    (d21_1==1|d21_2==1)
 26.         gen    c98_hhld_refrigerat    =    (d21_3==1)
 27.         gen    c98_hhld_tv            =    (d21_4==1|d21_5==1)
 28.         gen    c98_hhld_vcr        =    (d21_8==1|d21_9==1)
 29.         gen    c98_hhld_wash_mac    =    (d21_10==1)
 30.         gen    c98_hhld_dishwasher    =    (d21_12==1)
 31.         gen    c98_hhld_microwave    =    (d21_13==1)
 32.         gen    c98_hhld_car        =    (d21_18==1)
 33.         gen    c01_hhld_computer    =    (d21_15==1)
 34.         gen    c01_hhld_internet    =    (d21_16==1)
 35.         gen    c01_hhld_phone        =    (d21_17    ==1)
 36.         gen    c01_hhld_cable_tv    =    (d21_7==1)
 37.         
.         * no insurance
.         gen health_insurance = 0    
 38.         * public
.         replace health_insurance = 1 if e45_1 == 1
 39.         * military or police
.         replace health_insurance = 2 if e45_4 == 1
 40.         * municipal
.         replace health_insurance = 3 if e45_6 == 1
 41.         * IAMC
.         replace health_insurance = 4 if e45_2 == 1
 42.         * other
.         replace health_insurance = 5 if (e45_3 == 1 | e45_5 == 1 | ///
>             e45_7 == 1)
 43. 
.         gen public_health = (health_insurance == 1)
 44.             
.         capture gen trimestre = 1 if inlist(mes, 1, 2, 3)
 45.         capture replace trimestre = 2 if inlist(mes, 4, 5, 6)
 46.         capture replace trimestre = 3 if inlist(mes, 7, 8, 9)
 47.         capture replace trimestre = 4 if inlist(mes, 10, 11, 12)
 48.         capture gen pesosem = .
 49.         capture gen pesotri = .
 50. 
.         gen married  = (e33==1|e35!=0|e36==3) if e33!=0
 51.         gen blanco = (ascendencia == 3)
 52.         
.         gen estudiante = (pobpcoac == 7)
 53.         gen trabajo    = (pobpcoac == 2)
 54.         bysort numero: egen y_hogar_alt = sum(ytotal) 
 55.         gen horas_trabajo =  horas_trabajo_p + horas_trabajo_s
 56.         
.         gen live_births     = .
 57.         gen live_births_nbr = .
 58.         
.         destring numero, replace
 59.         destring anio, replace
 60.         destring secc, replace
 61.         destring segm, replace
 62.         destring estrato, replace
 63.         
.         keep numero pers anio trimestre mes dpto secc segm estrato loc nomloc
>  ccz*  ///
>              peso* hombre edad ytotal y_hogar* nbr_people nbr_above14 nbr_und
> er14    ///
>              pobpcoac married c98_* c01_* c06_* estudiante anios_* *trabaj* /
> //
>              lp_06 li_06 region_3 region_4 live_births* blanco ///
>              health_insurance public_health
 64.              
.         save ..\temp\clean_`year', replace
 65.         }
 66. end

. 
. main_clean_raw
file ..\temp\preclean_2001_p.dta saved
file ..\temp\preclean_2001_h.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                            57,410  
    -----------------------------------------
file ..\temp\preclean_2001.dta saved
file ..\temp\preclean_2002_p.dta saved
file ..\temp\preclean_2002_h.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                            56,333  
    -----------------------------------------
file ..\temp\preclean_2002.dta saved
file ..\temp\preclean_2003_p.dta saved
file ..\temp\preclean_2003_h.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                            55,369  
    -----------------------------------------
file ..\temp\preclean_2003.dta saved
file ..\temp\preclean_2004_p.dta saved
file ..\temp\preclean_2004_h.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                            55,587  
    -----------------------------------------
file ..\temp\preclean_2004.dta saved
file ..\temp\preclean_2005_p.dta saved
file ..\temp\preclean_2005_h.dta saved

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                            54,330  
    -----------------------------------------
file ..\temp\preclean_2005.dta saved
(21,533 real changes made)
(4,448 real changes made)
(806 real changes made)
(30,311 real changes made)
(1,849 real changes made)
(57,410 missing values generated)
(57,410 missing values generated)
(57,410 missing values generated)
file ..\temp\clean_2001.dta saved
(22,193 real changes made)
(4,416 real changes made)
(897 real changes made)
(28,520 real changes made)
(1,930 real changes made)
(56,333 missing values generated)
(56,333 missing values generated)
(56,333 missing values generated)
file ..\temp\clean_2002.dta saved
(22,626 real changes made)
(4,584 real changes made)
(1,999 real changes made)
(26,881 real changes made)
(2,006 real changes made)
(55,369 missing values generated)
(55,369 missing values generated)
(55,369 missing values generated)
file ..\temp\clean_2003.dta saved
(22,387 real changes made)
(4,614 real changes made)
(1,781 real changes made)
(26,665 real changes made)
(411 real changes made)
(55,587 missing values generated)
(55,587 missing values generated)
(55,587 missing values generated)
file ..\temp\clean_2004.dta saved
(21,689 real changes made)
(4,306 real changes made)
(605 real changes made)
(26,548 real changes made)
(333 real changes made)
(54,330 missing values generated)
(54,330 missing values generated)
(54,330 missing values generated)
file ..\temp\clean_2005.dta saved
(124,813 real changes made)
(19,078 real changes made)
(12,793 real changes made)
(102,640 real changes made)
(10,173 real changes made)
(57,844 missing values generated)
(8,057 real changes made)
anio: all characters numeric; replaced as int
secc: all characters numeric; replaced as byte
segm: all characters numeric; replaced as int
estrato: all characters numeric; replaced as byte
file ..\temp\clean_2006.dta saved
(61,369 real changes made)
(11,231 real changes made)
(5,018 real changes made)
(63,524 real changes made)
(8,682 real changes made)
(31,488 missing values generated)
(1,879 real changes made)
numero: all characters numeric; replaced as long
anio already numeric; no replace
secc: all characters numeric; replaced as byte
segm: all characters numeric; replaced as int
estrato already numeric; no replace
(143,185 missing values generated)
file ..\temp\clean_2007.dta saved
(50,942 real changes made)
(11,504 real changes made)
(4,441 real changes made)
(76,470 real changes made)
(8,530 real changes made)
(30,221 missing values generated)
(1,496 real changes made)
numero: all characters numeric; replaced as long
anio already numeric; no replace
secc: all characters numeric; replaced as byte
segm: all characters numeric; replaced as int
estrato already numeric; no replace
(144,582 missing values generated)
file ..\temp\clean_2008.dta saved
(44,068 real changes made)
(10,098 real changes made)
(2,431 real changes made)
(73,377 real changes made)
(6,404 real changes made)
(27,271 missing values generated)
(132,599 missing values generated)
(132,599 missing values generated)
numero: all characters numeric; replaced as long
anio: all characters numeric; replaced as int
secc: all characters numeric; replaced as byte
segm: all characters numeric; replaced as int
estrato: all characters numeric; replaced as byte
file ..\temp\clean_2009.dta saved
(43,839 real changes made)
(9,731 real changes made)
(2,470 real changes made)
(74,090 real changes made)
(6,408 real changes made)
(26,874 missing values generated)
(132,010 missing values generated)
(132,010 missing values generated)
numero: all characters numeric; replaced as long
anio: all characters numeric; replaced as int
secc: all characters numeric; replaced as byte
segm: all characters numeric; replaced as int
estrato already numeric; no replace
file ..\temp\clean_2010.dta saved
(42,132 real changes made)
(9,559 real changes made)
(2,814 real changes made)
(75,518 real changes made)
(6,999 real changes made)
(25,574 missing values generated)
(130,804 missing values generated)
(130,804 missing values generated)
numero: all characters numeric; replaced as long
anio: all characters numeric; replaced as int
secc: all characters numeric; replaced as byte
segm: all characters numeric; replaced as int
estrato already numeric; no replace
file ..\temp\clean_2011.dta saved
(37,936 real changes made)
(8,682 real changes made)
(2,723 real changes made)
(70,931 real changes made)
(6,399 real changes made)
(23,148 missing values generated)
(120,462 missing values generated)
(120,462 missing values generated)
numero: all characters numeric; replaced as long
anio: all characters numeric; replaced as int
secc: all characters numeric; replaced as byte
segm: all characters numeric; replaced as int
estrato already numeric; no replace
file ..\temp\clean_2012.dta saved
(39,720 real changes made)
(9,314 real changes made)
(1,906 real changes made)
(76,801 real changes made)
(6,273 real changes made)
(24,537 missing values generated)
(127,925 missing values generated)
(127,925 missing values generated)
numero: all characters numeric; replaced as long
anio: all characters numeric; replaced as int
secc: all characters numeric; replaced as byte
segm: all characters numeric; replaced as int
estrato already numeric; no replace
file ..\temp\clean_2013.dta saved
(40,327 real changes made)
(9,204 real changes made)
(1,998 real changes made)
(80,360 real changes made)
(6,784 real changes made)
(24,859 missing values generated)
(131,857 missing values generated)
(131,857 missing values generated)
numero: all characters numeric; replaced as long
anio: all characters numeric; replaced as int
secc: all characters numeric; replaced as byte
segm: all characters numeric; replaced as int
estrato already numeric; no replace
file ..\temp\clean_2014.dta saved
(36,101 real changes made)
(8,435 real changes made)
(1,745 real changes made)
(74,978 real changes made)
(5,926 real changes made)
(22,759 missing values generated)
(121,461 missing values generated)
(121,461 missing values generated)
numero: all characters numeric; replaced as long
anio: all characters numeric; replaced as int
secc: all characters numeric; replaced as byte
(75245 missing values generated)
segm: all characters numeric; replaced as int
(75245 missing values generated)
estrato already numeric; no replace
file ..\temp\clean_2015.dta saved
(35,558 real changes made)
(8,725 real changes made)
(974 real changes made)
(73,040 real changes made)
(4,996 real changes made)
(21,747 missing values generated)
(118,591 missing values generated)
(118,591 missing values generated)
numero: all characters numeric; replaced as long
anio: all characters numeric; replaced as int
secc: all characters numeric; replaced as byte
segm: all characters numeric; replaced as int
estrato already numeric; no replace
file ..\temp\clean_2016.dta saved

. 
end of do-file


Execute:  "C:\Program Files (x86)\Stata14\StataSE-64.exe" /e do "./append_years.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   14.2   Copyright 1985-2015 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     Special Edition                  College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

110-user Stata network perpetual license:
       Serial number:  401406206058
         Licensed to:  CIS Department
                       Brown University

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./append_years.do 

. clear all

. set more off

. adopath + ../../library/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files (x86)\Stata14\ado\base/"
  [2]  (SITE)      "C:\Program Files (x86)\Stata14\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../library/stata/gslab_misc/ado"

. 
. program main_append_years
  1.         append_years
  2. end

. 
. program recode_dummies
  1. syntax, vars(varlist)
  2.         foreach var in `vars' {
  3.                 replace `var'=0 if `var'==2
  4.         }
  5. end

. 
. program append_years
  1.         use ..\temp\clean_1998.dta, clear
  2.         
.         forval year=2001/2016{
  3.             append using ..\temp\clean_`year'.dta
  4.         }
  5.         replace anio = 1998 if anio == 98
  6.         replace anio = 1999 if anio == 99
  7.         replace anio = 2000 if anio == 0
  8.         
.         * asserting basic properties: 
.         * - that there are no missing departamentos in any year
.         * - and the primary keys
.         /*forval year=2001/2016{
>             unique dpto if anio == `year'
>                 local n = r(sum)
>                 assert `n' == 19
>         }
>         
>         isid numero pers anio*/
.         
.         recode_dummies, vars(trabajo_1 hombre busca_trabajo)
  9.         
.         save_data ..\output\clean_2001_2016, key(numero pers anio) replace
 10. end

. 
. main_append_years
(note: variable anio was byte, now int to accommodate using data's values)
(note: variable horas_trabajo was byte, now float to accommodate using data's
       values)
(note: variable meses_trabajando was byte, now float to accommodate using
       data's values)
(note: variable anios_trabajando was byte, now float to accommodate using
       data's values)
(note: variable numero was long, now double to accommodate using data's
       values)
(note: variable dpto was byte, now double to accommodate using data's values)
(note: variable ccz was byte, now double to accommodate using data's values)
(note: variable trimestre was float, now double to accommodate using data's
       values)
(note: variable mes was byte, now double to accommodate using data's values)
(note: variable pesoan was int, now double to accommodate using data's
       values)
(note: variable pesosem was int, now double to accommodate using data's
       values)
(note: variable pesotri was int, now double to accommodate using data's
       values)
(note: variable pers was byte, now double to accommodate using data's values)
(note: variable hombre was byte, now double to accommodate using data's
       values)
(note: variable edad was byte, now double to accommodate using data's values)
(note: variable blanco was float, now double to accommodate using data's
       values)
(note: variable trabajo_1 was byte, now double to accommodate using data's
       values)
(note: variable horas_trabajo_p was byte, now double to accommodate using
       data's values)
(note: variable meses_trabajando was float, now double to accommodate using
       data's values)
(note: variable anios_trabajando was float, now double to accommodate using
       data's values)
(note: variable horas_trabajo_s was byte, now double to accommodate using
       data's values)
(note: variable busca_trabajo was byte, now double to accommodate using
       data's values)
(note: variable pobpcoac was byte, now double to accommodate using data's
       values)
(note: variable ytotal was long, now double to accommodate using data's
       values)
(note: variable nbr_above14 was byte, now double to accommodate using data's
       values)
(note: variable nbr_people was byte, now double to accommodate using data's
       values)
(note: variable nbr_under14 was byte, now double to accommodate using data's
       values)
(note: variable y_hogar was long, now double to accommodate using data's
       values)
(note: variable anio was int, now double to accommodate using data's values)
(note: variable loc was str4, now str5 to accommodate using data's values)
(note: variable estrato was byte, now double to accommodate using data's
       values)
(label Pobpcoac already defined)
(label f102 already defined)
(label mes already defined)
(label region_4 already defined)
(label region_3 already defined)
(label f102 already defined)
(label f68 already defined)
(label e41 already defined)
(label e31_3 already defined)
(label e27 already defined)
(label mes already defined)
(label region_4 already defined)
(label region_3 already defined)
(label e26 already defined)
(label mes already defined)
(label region_4 already defined)
(label region_3 already defined)
(label pobpcoac already defined)
(label f99 already defined)
(label f66 already defined)
(label e26 already defined)
(label mes already defined)
(label region_4 already defined)
(label region_3 already defined)
(label pobpcoac already defined)
(label f99 already defined)
(label f66 already defined)
(label e26 already defined)
(label estratogeo09 already defined)
(label mes already defined)
(label region_4 already defined)
(label region_3 already defined)
(label dpto already defined)
(note: variable nomloc was str43, now str104 to accommodate using data's
       values)
(label pobpcoac already defined)
(label f99 already defined)
(label f66 already defined)
(label e26 already defined)
(label mes already defined)
(label region_4 already defined)
(label region_3 already defined)
(label dpto already defined)
(label pobpcoac already defined)
(label f99 already defined)
(label f66 already defined)
(label e26 already defined)
(label region_4 already defined)
(label region_3 already defined)
(label mes already defined)
(label dpto already defined)
(label pobpcoac already defined)
(label f99 already defined)
(label f66 already defined)
(label e26 already defined)
(label region_4 already defined)
(label region_3 already defined)
(label estred13 already defined)
(label mes already defined)
(label dpto already defined)
(label region_3 already defined)
(label region_4 already defined)
(label dpto already defined)
(label mes already defined)
(label pobpcoac already defined)
(label f99 already defined)
(label f66 already defined)
(label estred13 already defined)
(label e26 already defined)
(label region_4 already defined)
(label region_3 already defined)
(label dpto already defined)
(label mes already defined)
(label pobpcoac already defined)
(label f99 already defined)
(label f66 already defined)
(label estred13 already defined)
(label e26 already defined)
(56,857 real changes made)
(0 real changes made)
(0 real changes made)
(687,523 real changes made)
(1,000,829 real changes made)
(695,486 real changes made)
(data now sorted by numero pers anio)
  variable horas_trabajo was float now int
  variable c98_resid_house was float now byte
  variable c98_resid_owned was float now byte
  variable c98_nbr_rooms was float now byte
  variable c98_nbr_bedrooms was float now byte
  variable c98_b_piped_water was float now byte
  variable c98_hhld_toilet was float now byte
  variable c98_b_sewage was float now byte
  variable c98_hhld_stove was float now byte
  variable c98_hhld_hot_water was float now byte
  variable c98_hhld_refrigerat was float now byte
  variable c98_hhld_tv was float now byte
  variable c98_hhld_vcr was float now byte
  variable c98_hhld_wash_mac was float now byte
  variable c98_hhld_dishwasher was float now byte
  variable c98_hhld_microwave was float now byte
  variable c98_hhld_car was float now byte
  variable married was float now byte
  variable etnia was float now byte
  variable estudiante was float now byte
  variable trabajo was float now byte
  variable anios_prim was float now byte
  variable anios_secun was float now byte
  variable anios_terc was float now byte
  variable anios_tecn was float now byte
  variable educ_level was float now byte
  variable c01_hhld_computer was float now byte
  variable c01_hhld_internet was float now byte
  variable c01_hhld_phone was float now byte
  variable c01_hhld_cable_tv was float now byte
  variable health_insurance was float now byte
  variable public_health was float now byte
  variable c06_mat_walls was float now byte
  variable c06_mat_roof was float now byte
  variable c06_mat_floor was float now byte
  variable c06_b_electr was float now byte
  variable numero was double now long
  variable pers was double now byte
  variable anio was double now int
  variable dpto was double now byte
  variable estrato was double now byte
  variable hombre was double now byte
  variable edad was double now byte
  variable pobpcoac was double now byte
  variable horas_trabajo_p was double now byte
  variable horas_trabajo_s was double now byte
  variable busca_trabajo was double now byte
  variable meses_trabajando was double now byte
  variable anios_trabajando was double now byte
  variable pesotri was double now int
  variable pesosem was double now int
  variable pesoan was double now int
  variable ccz was double now byte
  variable nbr_people was double now byte
  variable nbr_above14 was double now byte
  variable nbr_under14 was double now byte
  variable trimestre was double now byte
  variable mes was double now byte
  variable trabajo_1 was double now byte
  variable blanco was double now byte
  variable region_3 was double now byte
  variable region_4 was double now byte
  variable pesomen was double now int
  variable live_births was double now byte
  variable live_births_nbr was double now byte
  variable li_06 was double now int
  variable ccz04 was double now byte
  variable ccz10 was double now byte
  (610,583,806 bytes saved)
===============================================================================
> ===================
File: ..\output\clean_2001_2016
Key: numero pers anio
===============================================================================
> ===================
  1896223:77(55112):1823636672:212204481

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      numero |  1,896,223    7.98e+08    9.85e+08          1   2.02e+09
        pers |  1,896,223    2.380981    1.504865          1         25
        anio |  1,896,223    2008.988     4.46842       1998       2016
      semana |     56,857     24.3248    13.78256          1         48
        dpto |  1,896,223    5.910126    5.846233          1         19
-------------+---------------------------------------------------------
        secc |  1,790,963    8.633498    15.99938          0         99
        segm |  1,790,963    55.97539    89.83519          0        845
     estrato |  1,896,223    5.735435    2.968623          1         12
      hombre |  1,896,223    .4721971    .4992265          0          1
        edad |  1,896,223    36.78974    23.45924          0         99
-------------+---------------------------------------------------------
    pobpcoac |  1,896,223     3.80653     3.20113          1         11
horas_trab~p |  1,896,223    17.70473    22.55873          0         99
horas_trab~s |  1,896,223    .8728472    4.775311          0         98
horas_trab~o |  1,896,223    18.60692    23.60409          0        180
busca_trab~o |  1,896,223    .0717885    .2581375          0          1
-------------+---------------------------------------------------------
meses_trab~o |  1,617,194    .5391072    2.499745          0         80
anios_trab~o |  1,617,194    4.020581     8.32721          0         98
      ytotal |  1,896,223    9129.439    17210.69          0    7244333
     pesotri |  1,775,761    105.3157     54.0713          1       1527
     pesosem |  1,657,170      52.149    28.29783          3       1345
-------------+---------------------------------------------------------
      pesoan |  1,896,223    26.51131    13.50505          1       1323
         ccz |  1,745,746    3.757554    5.445319          0         18
         loc |          0
      nomloc |          0
  nbr_people |  1,896,223    3.761734    1.872122          1         25
-------------+---------------------------------------------------------
 nbr_above14 |  1,896,223    2.770823    1.246363          1         16
 nbr_under14 |  1,896,223    .9907659    1.278672          0         13
     y_hogar |  1,896,223    28117.58    35286.08          0    7681180
c98_resid_~e |  1,896,223    .9962515    .0611102          0          1
c98_resid_~d |  1,896,223    .6392102    .4802298          0          1
-------------+---------------------------------------------------------
c98_nbr_ro~s |  1,896,223    3.579446    1.319121          1         80
c98_nbr_be~s |  1,896,223    2.192152     .837146          0         40
c98_b_pipe~r |  1,896,223    .9522229    .2132943          0          1
c98_hhld_t~t |  1,896,223    .9110226    .2847112          0          1
c98_b_sewage |  1,896,223    .5616729     .496182          0          1
-------------+---------------------------------------------------------
c98_hhld_s~e |  1,896,223    .9330279    .2499737          0          1
c98_hhld_h~r |  1,896,223    .8634976    .3433214          0          1
c98_hhld_r~t |  1,896,223    .8349218    .3712512          0          1
 c98_hhld_tv |  1,896,223    .9503054    .2173133          0          1
c98_hhld_vcr |  1,896,223    .4828203    .4997049          0          1
-------------+---------------------------------------------------------
c98_hhld_w~c |  1,896,223    .7028699    .4569945          0          1
c98_hhld_d~r |  1,896,223    .0403434    .1967633          0          1
c98_hhld_m~e |  1,896,223    .4805337    .4996211          0          1
c98_hhld_car |  1,896,223    .3684851     .482394          0          1
   trimestre |  1,896,223    2.498105    1.116807          1          4
-------------+---------------------------------------------------------
     married |  1,579,901    .5348993    .4987807          0          1
       etnia |          0
  estudiante |  1,896,223    .0664706    .2491029          0          1
     trabajo |  1,896,223    .4494508    .4974383          0          1
 y_hogar_alt |  1,896,223     28577.3    32680.66          0    7289481
-------------+---------------------------------------------------------
  anios_prim |     50,609    5.257543    1.510797          0          6
 anios_secun |     50,609    1.783813    2.322372          0          6
  anios_terc |     50,609    .3829556    1.254434          0          8
  anios_tecn |     50,609    .2425656    .8441915          0          7
  educ_level |     50,609    1.766939    .9369978          1          4
-------------+---------------------------------------------------------
         mes |  1,839,366    6.494094    3.444294          1         12
   trabajo_1 |  1,839,366    .4234492    .4941054          0          1
c01_hhld_c~r |  1,839,366    .5143044    .4997955          0          1
c01_hhld_i~t |  1,839,366     .350274    .4770558          0          1
c01_hhld_p~e |  1,839,366    .7160603     .450908          0          1
-------------+---------------------------------------------------------
c01_hhld_c~v |  1,839,366    .5446029    .4980067          0          1
health_ins~e |  1,839,366    2.818566     1.51163          0          5
public_hea~h |  1,839,366     .324359     .468135          0          1
      blanco |  1,560,337    .9582879    .1999307          0          1
    region_3 |  1,560,337    1.791686    .7105442          1          3
-------------+---------------------------------------------------------
    region_4 |  1,560,337    1.874478    .8836783          1          4
     pesomen |  1,439,875    269.4868    116.7817          1       2451
 live_births |    544,628    1.037506    .6892997          0          2
live_birth~r |    544,628     1.42473    1.954932          0         99
       li_06 |  1,560,337    1751.036    550.9899        898       3021
-------------+---------------------------------------------------------
       lp_06 |  1,560,337    17719.04    9722.893       2214   132026.8
c06_mat_wa~s |  1,560,337     .971983    .1650215          0          1
c06_mat_roof |  1,560,337    .5369802    .4986308          0          1
c06_mat_fl~r |  1,560,337    .7705964    .4204494          0          1
c06_b_electr |  1,560,337    .9857172    .1186542          0          1
-------------+---------------------------------------------------------
       ccz04 |    120,462    3.528764    5.341155          0         18
       ccz10 |    120,462    3.552116    5.353865          0         18




(note: file ..\output\clean_2001_2016.dta not found)
file ..\output\clean_2001_2016.dta saved

. 
end of do-file

 make.py ended: 2019-08-26 18:59:24
